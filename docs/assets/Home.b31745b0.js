import{c as r,u as _,d as v,r as I,o as l,a as d,b as s,n as g,t as m,p as N,e as S,w as T,f as w,v as b,g as x,h as y,F as f,i as z,j as Z}from"./index.80c6ab06.js";import{_ as C}from"./_plugin-vue_export-helper.cdc0426e.js";const c=r("https://wuipdhkpnvpplsmetylp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1aXBkaGtwbnZwcGxzbWV0eWxwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY2NjA3Njg5NywiZXhwIjoxOTgxNjUyODk3fQ.my4zcMKH1A3TM6z5DS_pCGUzyVXIuDgxNN4f0KIs0sI"),J=_(),k=v("task",{state:()=>({task:void 0}),actions:{async getTasks(){const{data:e,error:t}=await c.from("task").select("*").order("id",{ascending:!1});return this.task=e,console.log(e),this.task},async newTask(e,t){await c.from("task").insert([{user_id:J.user.id,title:e,isCreated:!1,description:t}])},async updateTask(e,t,a){await c.from("task").update({title:e,description:t}).eq("id",a)},async deleteTask(e){await c.from("task").delete().eq("id",e)},async doneTask(e,t){console.log(t);try{const{data:a,error:o}=await c.from("task").update({isCreated:!t}).match({id:e})}catch(a){console.log("This is my error",a)}}},persist:{enabled:!0}});const V=e=>(N("data-v-6d2f888b"),e=e(),S(),e),X={class:"section"},j={class:"container"},M={class:"task-title"},O={class:"title"},D={class:"task-description"},G={class:"subtitle"},U=V(()=>s("button",{class:"button is-info is-light edit-button"},"Edit",-1)),Y={__name:"TaskCard",props:{task:Object},setup(e){const t=e;r("https://wuipdhkpnvpplsmetylp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1aXBkaGtwbnZwcGxzbWV0eWxwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY2NjA3Njg5NywiZXhwIjoxOTgxNjUyODk3fQ.my4zcMKH1A3TM6z5DS_pCGUzyVXIuDgxNN4f0KIs0sI");const a=k();I(!0);const o=async()=>{await a.deleteTask(t.task.id),await a.getTasks()},n=async()=>{await a.doneTask(t.task.id,t.task.isCreated),await a.getTasks()};return(u,h)=>(l(),d("div",X,[s("div",j,[s("div",{class:g(["task-card",{done:t.task.isCreated}])},[s("div",M,[s("div",O,m(t.task.title),1)]),s("div",D,[s("div",G,m(t.task.description),1)]),s("div",{class:"task-buttons"},[U,s("button",{onClick:n,class:"button is-success is-light done-button"},"Done"),s("button",{onClick:o,class:"button is-danger is-light delete-button"},"Delete")])],2)])]))}},$=C(Y,[["__scopeId","data-v-6d2f888b"]]),B={class:"section"},A={class:"container mt-5"},W=["onSubmit"],K={class:"control"},F=s("br",null,null,-1),H={class:"control"},R=s("div",{class:"control"},[s("button",{type:"submit",class:"mt-2 button is-info"},"Submit")],-1),Q={__name:"NewTask",setup(e){r("https://wuipdhkpnvpplsmetylp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1aXBkaGtwbnZwcGxzbWV0eWxwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY2NjA3Njg5NywiZXhwIjoxOTgxNjUyODk3fQ.my4zcMKH1A3TM6z5DS_pCGUzyVXIuDgxNN4f0KIs0sI");const t=k(),a=_(),o=I(""),n=I(""),u=async()=>{await t.newTask(o.value,n.value),console.log(a.user),console.log(o.value,n.value),o.value="",n.value="",t.getTasks()};return(h,i)=>(l(),d("div",B,[s("div",A,[s("form",{onSubmit:T(u,["prevent"])},[s("div",K,[w(s("input",{"onUpdate:modelValue":i[0]||(i[0]=p=>o.value=p),class:"input is-normal",placeholder:"Post title"},null,512),[[b,o.value]])]),F,s("div",H,[w(s("textarea",{"onUpdate:modelValue":i[1]||(i[1]=p=>n.value=p),class:"textarea",placeholder:"Write a post"},null,512),[[b,n.value]])]),R],40,W)])]))}},q=s("h1",null,"Home",-1),E=s("br",null,null,-1),L=s("br",null,null,-1),ts={__name:"Home",setup(e){r("https://wuipdhkpnvpplsmetylp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1aXBkaGtwbnZwcGxzbWV0eWxwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY2NjA3Njg5NywiZXhwIjoxOTgxNjUyODk3fQ.my4zcMKH1A3TM6z5DS_pCGUzyVXIuDgxNN4f0KIs0sI");const t=x(),a=_(),o=k(),n=async()=>{try{await a.logout(),t.push({name:"login"})}finally{}};return o.getTasks(),(u,h)=>(l(),d(f,null,[q,y(Q),(l(!0),d(f,null,z(Z(o).task,i=>(l(),d("div",null,[y($,{task:i},null,8,["task"])]))),256)),E,L,s("button",{onClick:n},"Log out")],64))}};export{ts as default};
