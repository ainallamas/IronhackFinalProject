import{c as p,u as y,d as C,r as _,o as c,a as d,b as s,n as b,t as f,w as h,v as m,p as S,e as x,f as z,g as Z,h as N,F as g,i as J,j as V}from"./index.537180b1.js";import{_ as X}from"./_plugin-vue_export-helper.cdc0426e.js";const u=p("https://wuipdhkpnvpplsmetylp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1aXBkaGtwbnZwcGxzbWV0eWxwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY2NjA3Njg5NywiZXhwIjoxOTgxNjUyODk3fQ.my4zcMKH1A3TM6z5DS_pCGUzyVXIuDgxNN4f0KIs0sI"),j=y(),v=C("task",{state:()=>({task:void 0}),actions:{async getTasks(){const{data:e,error:t}=await u.from("task").select("*").order("id",{ascending:!1});return this.task=e,console.log(e),this.task},async newTask(e,t){await u.from("task").insert([{user_id:j.user.id,title:e,isCreated:!1,description:t}])},async updateTask(e,t,a){await u.from("task").update({title:e,description:t}).eq("id",a)},async deleteTask(e){await u.from("task").delete().eq("id",e)},async doneTask(e,t){console.log(t);try{const{data:a,error:o}=await u.from("task").update({isCreated:!t}).match({id:e})}catch(a){console.log("This is my error",a)}}},persist:{enabled:!0}});p("https://wuipdhkpnvpplsmetylp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1aXBkaGtwbnZwcGxzbWV0eWxwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY2NjA3Njg5NywiZXhwIjoxOTgxNjUyODk3fQ.my4zcMKH1A3TM6z5DS_pCGUzyVXIuDgxNN4f0KIs0sI");const M=e=>(S("data-v-e8e2e0d0"),e=e(),x(),e),O={class:"section"},G={class:"container"},U={class:"task-title"},D={class:"title"},Y={class:"task-description"},B={class:"subtitle"},A={class:"control"},W=M(()=>s("br",null,null,-1)),$={class:"control"},K={__name:"TaskCard",props:{task:Object},setup(e){const t=e;p("https://wuipdhkpnvpplsmetylp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1aXBkaGtwbnZwcGxzbWV0eWxwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY2NjA3Njg5NywiZXhwIjoxOTgxNjUyODk3fQ.my4zcMKH1A3TM6z5DS_pCGUzyVXIuDgxNN4f0KIs0sI");const a=v(),o=_(!1),i=async()=>{await a.deleteTask(t.task.id),await a.getTasks()},I=async()=>{await a.doneTask(t.task.id,t.task.isCreated),await a.getTasks()},n=_({title:t.task.title,description:t.task.description}),l=()=>{o.value=!0},r=async()=>{o.value=!1,n.value.title=t.task.title,n.value.description=t.task.description,await a.updateTask(t.task.title,t.task.description,t.task.id)},T=async()=>{o.value=!1,await a.updateTask(n.value.title,n.value.description,t.task.id),await a.getTasks()};return(os,k)=>(c(),d("div",O,[s("div",G,[o.value?(c(),d("div",{key:1,class:b(["task-card",{done:t.task.isCreated}])},[s("div",A,[h(s("input",{"onUpdate:modelValue":k[0]||(k[0]=w=>n.value.title=w),class:"input is-normal",placeholder:"Post the new title"},null,512),[[m,n.value.title]])]),W,s("div",$,[h(s("textarea",{"onUpdate:modelValue":k[1]||(k[1]=w=>n.value.description=w),class:"textarea",placeholder:"Write a new post description"},null,512),[[m,n.value.description]])]),s("div",{class:"control"},[s("button",{onClick:T,class:"mt-2 button is-info"},"Accept"),s("button",{onClick:r,class:"mt-2 button is-info"},"Cancel")])],2)):(c(),d("div",{key:0,class:b(["task-card",{done:t.task.isCreated}])},[s("div",U,[s("div",D,f(t.task.title),1)]),s("div",Y,[s("div",B,f(t.task.description),1)]),s("div",{class:"task-buttons"},[s("button",{onClick:l,class:"button is-info is-light edit-button"},"Edit"),s("button",{onClick:I,class:"button is-success is-light done-button"},"Done"),s("button",{onClick:i,class:"button is-danger is-light delete-button"},"Delete")])],2))])]))}},F=X(K,[["__scopeId","data-v-e8e2e0d0"]]),H={class:"section"},R={class:"container mt-5"},Q=["onSubmit"],E={class:"control"},q=s("br",null,null,-1),L={class:"control"},P=s("div",{class:"control"},[s("button",{type:"submit",class:"mt-2 button is-info"},"Submit")],-1),ss={__name:"NewTask",setup(e){p("https://wuipdhkpnvpplsmetylp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1aXBkaGtwbnZwcGxzbWV0eWxwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY2NjA3Njg5NywiZXhwIjoxOTgxNjUyODk3fQ.my4zcMKH1A3TM6z5DS_pCGUzyVXIuDgxNN4f0KIs0sI");const t=v(),a=y(),o=_(""),i=_(""),I=async()=>{await t.newTask(o.value,i.value),console.log(a.user),console.log(o.value,i.value),o.value="",i.value="",t.getTasks()};return(n,l)=>(c(),d("div",H,[s("div",R,[s("form",{onSubmit:z(I,["prevent"])},[s("div",E,[h(s("input",{"onUpdate:modelValue":l[0]||(l[0]=r=>o.value=r),class:"input is-normal",placeholder:"Post title"},null,512),[[m,o.value]])]),q,s("div",L,[h(s("textarea",{"onUpdate:modelValue":l[1]||(l[1]=r=>i.value=r),class:"textarea",placeholder:"Write a post"},null,512),[[m,i.value]])]),P],40,Q)])]))}},ts=s("h1",null,"Home",-1),es=s("br",null,null,-1),as=s("br",null,null,-1),ls={__name:"Home",setup(e){p("https://wuipdhkpnvpplsmetylp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind1aXBkaGtwbnZwcGxzbWV0eWxwIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTY2NjA3Njg5NywiZXhwIjoxOTgxNjUyODk3fQ.my4zcMKH1A3TM6z5DS_pCGUzyVXIuDgxNN4f0KIs0sI");const t=Z(),a=y(),o=v(),i=async()=>{try{await a.logout(),t.push({name:"login"})}finally{}};return o.getTasks(),(I,n)=>(c(),d(g,null,[ts,N(ss),(c(!0),d(g,null,J(V(o).task,l=>(c(),d("div",null,[N(F,{task:l},null,8,["task"])]))),256)),es,as,s("button",{onClick:i},"Log out")],64))}};export{ls as default};
